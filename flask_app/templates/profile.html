<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">    
    <title>Profile</title>
</head>
<body class = "bg-body-tertiary">
    <div>
        <nav class = "navbar navbar-expand-lg bg-body-tertiary d-flex justified-content-around mb-5 mt-3">
            <div class = "container-fluid mx-2">
                {% if session.band_id == musician_id %}
                    <a class = "navbar-brand btn text-light" style = "background-color: rgb(204, 190, 139);" href = "/profile/edit/{{musician.id}}">Edit Profile</a>
                {% else %}
                    <div></div>
                {% endif %}
                <ul class = "navbar-nav mb-2 mb-lg-0">
                    <li class = "nav-item">
                        {% if session.band_id == musician_id %}
                            <a class = " btn mx-2 text-light" style = "background-color: rgb(204, 190, 139);" href = "/profile/requests">Gig Requests</a>
                        {% else %}
                            <a class = " btn mx-2 text-light" style = "background-color: rgb(35, 100, 138);" href = "/dashboard">Dashboard</a>
                        {% endif %}
                    </li>
                    <li class = "nav-item">
                        <a class = "btn btn-danger" href = "/logout">Logout</a>
                    </li>
                </ul>
            </div>
        </nav>

        <div class = "mx-4 mb-4">
            <div class = "d-flex justify-content-between">
                <div class = "border border-3 rounded p-4 bg-white h-75 w-25 sticky-top">
                    <p>Profile picture: {{ musician.profile_pic }}</p>
                    
                    <img class = "rounded-circle w-50 mx-auto d-block" src = "../static/assests/img/profile/profile.png" alt = "Profile picture">
                    
                    <h4 class = "m-3 text-center">{{  session.first_name }} {{ musician.last_name }}</h4>
                    <p> {{ musician.description }}</p>
                    <p> {{ musician.email }}</p>
                </div>

                <div class = "">
                    <table class = "table table-bordered text-center mb-3 bg-body-white">
                        <thead class = "table">
                            <tr>
                                <th scope = "col">Date Performed:</th>
                                <th scope = "col">Location:</th>
                                <th scope = "col">Performance:</th>
                                {% if session.band_id == musician_id %}
                                    <th scope = "col">Actions:</th>
                                {% else %}
                                {% endif %}
                            </tr>
                        </thead>

                        <tbody class = "">
                            {% for song in songs %}
                                <tr>
                                    {% if session.musician_id == song.musician_id %}
                                        <td> {{ song.date }} </td>
                                        <td> {{ song.city }}, {{ song.state }} </td>
                                        <td><iframe src = "{{ song.link }}"></iframe></td>
                                        <td><a href = "/profile/edit_song/{{song.id}}">Edit</a> | <a href = "/profile/delete_song/{{song.id}}">Delete</a></td>
                                    
                                    {% elif song.musician_id == musician.id %}
                                        <!-- <h3>second if check passed</h3> -->
                                        <td> {{ song.date }}</td>
                                        <td> {{ song.city }}, {{ song.state }} </td>
                                        <td><iframe src = "{{ song.link }}"></iframe></td>
                                    {% endif %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% if session.band_id == musician_id %}
                        <a class = "btn btn-primary" href = "/profile/add_song">Add Performance</a>
                    {% else %}
                    {% endif %}
                </div>

                <div class = "">
                    <table class = "table table-bordered border border-3 border-rounded text-center mb-5 bg-body-white">
                        <thead class = "table">
                            <tr>
                                <th scope = "col">Available Days:</th>
                            </tr>
                        </thead>

                        <tbody class = "">
                            <tr>
                                <td>{{ musician.availability }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <form class = "mt-5" action = "">
                        <input type = "date" class = "form-control border-3" name = "date_made">
                        {% if session.musician_id %}

                        {% elif session.band_id %}
                            <button type = "submit" class = "btn btn-success mt-3 text-center">Submit Request</button>
                        
                            <!-- <button type = "submit" class = "btn btn-primary mt-3 text-center">Request Date</button> -->
                        {% endif %}
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>